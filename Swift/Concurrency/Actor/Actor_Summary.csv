주제,항목,설명,비고
Actor 기본,정의,동시성 환경에서 안전하게 사용할 수 있는 참조 타입,컴파일러가 동시 접근 차단
Actor 기본,키워드,actor,class/struct 대신 사용
Actor 기본,타입 특성,참조 타입,class처럼 상태 공유에 유용
Actor 기본,상속,불가,convenience init/final/override 사용 불가
Actor 기본,프로토콜,Actor 프로토콜 자동 준수,모든 actor에 적용
외부 접근,가변 프로퍼티 읽기,await 필요,외부에서 접근 시
외부 접근,메서드 호출,await 필요,외부에서 접근 시
외부 접근,상수(let) 프로퍼티,await 불필요,race condition 없음
외부 접근,프로퍼티 쓰기,불가,await 여부와 무관
내부 접근,자신의 프로퍼티,await 불필요,actor 내부 메서드에서
내부 접근,다른 actor 접근,await 필요,다른 actor 인스턴스
동작 원리,메시지 큐,내부적으로 inbox 운영,요청을 순서대로 처리
동작 원리,Actor Isolation,한 번에 하나의 코드만 가변 상태 접근,동시 접근 방지
동작 원리,재진입(Reentrant),가능,하나의 task 실행 중 다른 task 시작 가능
Executor,정의,actor의 코드가 실행되는 실행 컨텍스트,
Executor,Serial Executor,작업을 한 번에 하나씩 실행,DispatchQueue와 유사
Executor,일반 actor,Swift 런타임 기본 executor,
Executor,@MainActor,메인 스레드 executor,
Executor,Custom,SerialExecutor 프로토콜 구현,SE-0392
Actor Hop,정의,실행 컨텍스트가 actor 간 전환되는 것,
Actor Hop,발생 시점,await 키워드가 있는 곳,potential suspension point
Actor Hop,성능,컨텍스트 스위칭 비용 발생,빈번한 hop 주의
isolated,용도,외부 함수를 특정 actor에 격리,
isolated,효과,await 없이 프로퍼티 직접 접근 가능,actor 내부처럼 동작
isolated,호출 시,await 필요,async 아니어도
isolated,제한,두 개의 isolated 파라미터 불가,모호함 방지
nonisolated,용도,actor 멤버를 격리에서 제외,
nonisolated,효과,외부에서 await 없이 호출 가능,
nonisolated,접근 가능 대상,다른 nonisolated 멤버만,상수 프로퍼티 포함
nonisolated,저장 프로퍼티,사용 불가,연산 프로퍼티만 가능
@MainActor,정의,메인 스레드에서 실행되는 global actor,UI 업데이트 보장
@MainActor,적용 대상,타입 전체 또는 개별 메서드,
@MainActor,SwiftUI View,Xcode 16+에서 자동 적용,
@MainActor,Observable 클래스,명시적 @MainActor 권장,
MainActor.run(),용도,어디서든 메인 스레드에서 코드 실행,
MainActor.run(),이미 main actor일 때,즉시 실행,
Task { @MainActor in },실행 시점,다음 run loop까지 대기,MainActor.run()과 차이
코드 실행 위치,결정 주체,함수 자체가 결정,호출 측이 아님
코드 실행 위치,actor 지정 없는 async,Swift가 자유롭게 선택,대부분 백그라운드
코드 실행 위치,@MainActor async,항상 main actor에서 실행,
Global Actor Inference,적용 버전,Swift 5.5 ~ 5.10,Swift 6에서 비활성화
Global Actor Inference,규칙1 - 클래스 상속,서브클래스도 자동 @MainActor,
Global Actor Inference,규칙2 - 메서드 오버라이드,오버라이드도 자동 @MainActor,
Global Actor Inference,규칙3 - Property Wrapper,@StateObject/@ObservedObject 사용 시 타입 전체 @MainActor,
Global Actor Inference,규칙4 - 프로토콜 메서드,준수와 구현 동시에 하면 자동 추론,분리 시 명시 필요
Global Actor Inference,규칙5 - @MainActor 프로토콜,타입 선언과 동시 준수 시 타입 전체 @MainActor,extension 준수 시 메서드만
